<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Form</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            background-color: #f0f0f0;
            display: flex;
            flex-direction: column;
            align-items: center;
        }

        h1 {
            margin-top: 20px;
        }
        h2 {
            margin-top: 5px;
        }

        form {
            margin-bottom: 20px;
            width: 45%;
        }

        .top-section {
            display: flex;
            justify-content: space-between;
            width: 80%;
            margin-top: 10px;
            gap: 5px;
        }

        .input-form {
            width: 45%;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            background: #fff;
            padding: 10px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            height: auto;
        }

        .input-form .form-group {
            display: flex;
            align-items: center;
            margin-bottom: 5px;
        }

        .input-form label {
            flex: 1;
            margin-right: 10px;
        }

        .input-form input {
            flex: 1;
            width: 40%;
        }

        .timer-container {
            text-align: center;
            background: #fff;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 20px;
        }

        #timer {
            font-size: 2em;
            margin: 20px 0;
        }

        button {
            padding: 10px 20px;
            margin: 5px;
            font-size: 1em;
            cursor: pointer;
            border: none;
            border-radius: 5px;
            background-color: #007bff;
            color: white;
        }

        button:hover {
            background-color: #0056b3;
        }

        .form-container-wrapper {
            border: 1px solid black;
            padding: 10px;
            border-radius: 5px;
            margin-top: 20px;
            background-color: #f9f9f9;
            display: none;
        }

        .form-container {
            display: flex;
        }

        .column {
            flex: 1;
            padding: 10px;
            border-right: 1px solid #000;
        }

        .column:last-child {
            border-right: none;
        }

        .question {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .question-header {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .radio-group {
            display: flex;
            justify-content: space-between;
            width: 100%;
        }

        .radio-label {
            display: flex;
            align-items: center;
            margin-right: 10px;
        }

        .result-container {
            display: none;
            flex-direction: row;
            align-items: flex-start;
            margin: 20px;
            padding: 20px;
            border: 1px solid #ccc;
            border-radius: 10px;
            background-color: #f9f9f9;
        }

        .your-response-container {
            flex: 2; /* Increase the flex value to give more space */
            margin-right: 20px;
        }

        .assessment-container {
            flex: 1; /* Adjust the flex value to balance the layout */
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 10px;
        }
        .your-response-container th, .your-response-container td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }

        .your-response-container th {
            background-color: #f2f2f2;
        }
        .result-item {
            display: flex;
            align-items: center;
            margin-bottom: 10px;
        }

        .result-item label {
            margin-right: 10px;
        }

        .correct {
            appearance: none;
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border: 2px solid green;
            border-radius: 3px;
            position: relative;
        }

        .correct:checked::before {
            content: '✔';
            color: green;
            position: absolute;
            top: -2px;
            left: 2px;
            font-size: 18px;
        }

        .incorrect {
            appearance: none;
            -webkit-appearance: none;
            width: 20px;
            height: 20px;
            border: 2px solid red;
            border-radius: 3px;
            position: relative;
        }

        .incorrect:checked::before {
            content: '✘';
            color: red;
            position: absolute;
            top: -2px;
            left: 2px;
            font-size: 18px;
        } 
        .summary-button-container {
            /* margin-top: 5px; */
            text-align: center;
        }

        #summaryButton {
            padding: 10px 20px;
            background-color: #007bff;
            color: white;
            border: none;
            border-radius: 5px;
            cursor: pointer;
        }

        #summaryButton:hover {
            background-color: #0056b3;
        }

        .summary-container {
            /* margin-top: 5px; */
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            background-color: #f9f9f9;
        }
        .summary-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }

        .summary-table th, .summary-table td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }

        .summary-table th {
            background-color: #f2f2f2;
        }

        .time-summary-container {
            margin-top: 20px;
            padding: 10px;
            border: 1px solid #ccc;
            border-radius: 5px;
            background-color: #f9f9f9;
        }

        .time-summary-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 10px;
        }

        .time-summary-table th, .time-summary-table td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }

        .time-summary-table th {
            background-color: #f2f2f2;
        }
        /* styles.css */
        .chart-container {
            width: 80%;
            margin: 0 auto;
            padding: 20px;
        }


        table {
            margin: 0 auto;
            border-collapse: collapse;
        }

        table,
        th,
        td {
            border: 1px solid black;
        }
    </style>
    <!-- Import Chart.js v4.x -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.0.1"></script>
    <!-- Import chartjs-plugin-annotation for v4.x -->
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@1.1.0"></script>
</head>

<body>

    <h1>Practice Quiz Response Form</h1>
    <div class="top-section">
        <form id="inputForm" class="input-form">
            <div class="form-group">
                <label for="numQuestions">Number of Questions:</label>
                <input type="number" id="numQuestions" name="numQuestions" value="20">
            </div>
            <div class="form-group">
                <label for="numColumns">Number of Columns:</label>
                <input type="number" id="numColumns" name="numColumns" value="4">
            </div>
            <div class="form-group">
                <label for="startIndex">Starting Question Number:</label>
                <input type="number" id="startIndex" name="startIndex" value="1">
            </div>
            <div class="button-group">
                <button type="button" onclick="generateForm()">Generate Form</button>
                <button type="button" onclick="clearAll()">Clear All</button>
                <button type="button" onclick="submitForm()">Submit</button>
            </div>
        </form>

        <div id="summary-button-container" class="summary-button-container" style="display: none;">
            <button id="summaryButton" onclick="showSummary()">Show Summary</button>
            <div id="summary" class="summary-container" style="display: none;"></div>
        </div>

        <div class="timer-container">
            <h1>Quiz Timer</h1>
            <div id="timer">00:00:00</div>
            <button id="startButton">Start</button>
            <button id="stopButton">Stop</button>
        </div>
    </div>
    <center>
        <div class="form-container-wrapper" id="formContainer-wrapper">
            <div class="form-container" id="formContainer"></div>
        </div>
    </center>
    <div id="result" class="result-container">
        <div id="your-response" class="your-response-container"></div>
        <div id="assessment" class="assessment-container"></div>
    </div>
    <div id="time-summary" class="time-summary-container" style="display: none;"></div>
    <div id="chart" class="chart-container">
        <canvas id="timeChart"></canvas>
    </div>
    <script>
        let startTime;
        let timerInterval;
        let elapsedTime = 0;
        let timeSpent = JSON.parse(localStorage.getItem('timeSpent')) || {};
        let history = {};
        let timeChart;

        let lastTimestamp;
        const numQuestions = parseInt(document.getElementById('numQuestions').value) || 20;
        const numColumns = parseInt(document.getElementById('numColumns').value) || 4;
        const startIndex = parseInt(document.getElementById('startIndex').value) || 1;
        
        // Initialize time spent for each question
        function initializeTimeTracking(numQuestions,startIndex) {
            for (let i = 0; i < numQuestions; i++) {
                timeSpent[i+startIndex] = 0;
            }
        }
        document.getElementById('startButton').addEventListener('click', function() {
            startTime = new Date();
            lastTimestamp = Date.now();
            initializeTimeTracking(numQuestions,startIndex);
            addEventListeners();
            timerInterval = setInterval(updateTimer, 1000);
        });


        document.getElementById('stopButton').addEventListener('click', function() {
            clearInterval(timerInterval);
            elapsedTime = new Date() - startTime;
        });
        function updateTimeSpent(questionNumber) {
            const currentTimestamp = Date.now();
            const timeDifference = currentTimestamp - lastTimestamp;

            // Update the time spent on the current question
            timeSpent[questionNumber] += timeDifference;

            // Update the last timestamp
            lastTimestamp = currentTimestamp;
            localStorage.setItem('timeSpent',JSON.stringify(timeSpent));
        }

        // Add event listeners to all radio buttons
        function addEventListeners() {
            const radioButtons = document.querySelectorAll('input[type="radio"]');
            radioButtons.forEach(radio => {
                radio.addEventListener('click', (event) => {
                    const questionNumber = parseInt(event.target.name.split('-')[1]);
                    updateTimeSpent(questionNumber);
                });
            });
        }



        function updateTimer() {
            const currentTime = new Date();
            const elapsedTime = currentTime - startTime;
            

            const hours = Math.floor(elapsedTime / (1000 * 60 * 60));
            const minutes = Math.floor((elapsedTime % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((elapsedTime % (1000 * 60)) / 1000);

            document.getElementById('timer').textContent =
                `${pad(hours)}:${pad(minutes)}:${pad(seconds)}`;
        }

        function pad(number) {
            return number < 10 ? '0' + number : number;
        }

        function generateForm() {
            const numQuestions = parseInt(document.getElementById('numQuestions').value) || 20;
            const numColumns = parseInt(document.getElementById('numColumns').value) || 4;
            const startIndex = parseInt(document.getElementById('startIndex').value) || 1;
            // Save number of questions and columns to local storage
            localStorage.setItem('numQuestions', numQuestions);
            localStorage.setItem('numColumns', numColumns);
            localStorage.setItem('startIndex', startIndex);
            
            // Hide the questions and options after submitting
            document.getElementById('result').style.display = 'none';
            document.getElementById('summary-button-container').style.display = 'none';
            document.getElementById('chart').innerHTML =`<canvas id="timeChart"></canvas>`;
            document.getElementById('time-summary').style.display = 'none';
            document.getElementById('result').innerHTML = `<div id="result" class="result-container">
        <div id="your-response" class="your-response-container"></div>
        <div id="assessment" class="assessment-container"></div>
        </div>
            `;

            document.getElementById('formContainer-wrapper').style.display = 'inline-block';

            const formContainer = document.getElementById('formContainer');
            formContainer.innerHTML = '';

            const form = document.createElement('form');
            form.className = 'form-container';

            const questionsPerColumn = Math.floor(numQuestions / numColumns);
            const remainder = numQuestions % numColumns;

            let questionNumber = startIndex;
            for (let col = 0; col < numColumns; col++) {
                const column = document.createElement('div');
                column.className = 'column';

                // Add the header row with A, B, C, D for each column
                const headerRow = document.createElement('div');
                headerRow.className = 'question-header';
                headerRow.innerHTML = `
                    <div class="radio-group">
                        <label class="radio-label">Q</label>
                        <label class="radio-label">A</label>
                        <label class="radio-label">B</label>
                        <label class="radio-label">C</label>
                        <label class="radio-label">D</label>
                    </div>
                `;
                column.appendChild(headerRow);

                const questionsInThisColumn = questionsPerColumn + (col < remainder ? 1 : 0);

                for (let i = 0; i < questionsInThisColumn; i++) {
                    const questionDiv = document.createElement('div');
                    questionDiv.className = 'question';
                    const questionText = "0".repeat((numQuestions + startIndex - 1).toString().length - questionNumber.toString().length) + questionNumber;
                    questionDiv.innerHTML = `
                        ${questionText}. 
                        <div class="radio-group">
                            <label class="radio-label"><input type="radio" name="q-${questionNumber}" value="A" onclick="handleSelection(${questionNumber}, 'A')"></label>
                            <label class="radio-label"><input type="radio" name="q-${questionNumber}" value="B" onclick="handleSelection(${questionNumber}, 'B')"></label>
                            <label class="radio-label"><input type="radio" name="q-${questionNumber}" value="C" onclick="handleSelection(${questionNumber}, 'C')"></label>
                            <label class="radio-label"><input type="radio" name="q-${questionNumber}" value="D" onclick="handleSelection(${questionNumber}, 'D')"></label>
                        </div>
                    `;
                    column.appendChild(questionDiv);
                    questionNumber++;
                }
                form.appendChild(column);
            }
            // Show the form
            formContainer.appendChild(form);
            loadSelections();
            

        }

        function handleSelection(questionNumber, option) {
            const numQuestions = parseInt(document.getElementById('numQuestions').value) || 20;
            const numColumns = parseInt(document.getElementById('numColumns').value) || 4;
            const startIndex = parseInt(document.getElementById('startIndex').value) || 1;

            const selectedOption = document.querySelector(`input[name="q-${questionNumber}"][value="${option}"]`);
            if (history.hasOwnProperty(questionNumber) && history[questionNumber]===option) {
                selectedOption.checked = false;
                localStorage.removeItem(`q-${questionNumber}`);
                history[questionNumber]= 'none';
            } else {
                selectedOption.checked = true;
                localStorage.setItem(`q-${questionNumber}`, option);
                history[questionNumber] = option;
            }
        }

        function loadSelections() {
            history = {};
            const numQuestions = parseInt(document.getElementById('numQuestions').value) || 20;
            const numColumns = parseInt(document.getElementById('numColumns').value) || 4;
            const startIndex = parseInt(document.getElementById('startIndex').value) || 1;
            let timeSpent = JSON.parse(localStorage.getItem('timeSpent')) || {};
            for (let i = 0; i < numQuestions; i++) {
                const savedOption = localStorage.getItem(`q-${i+startIndex}`);
                if (savedOption) {
                    const radioButton = document.querySelector(`input[name="q-${i+startIndex}"][value="${savedOption}"]`);
                    if (radioButton) {
                        radioButton.checked = true;
                        history[i+startIndex] = savedOption;
                    }
                }
            }
        }

        function clearAll() {
            localStorage.clear();
            history = {};
            document.getElementById('formContainer-wrapper').style.display = 'none';
            document.getElementById('result').style.display = 'none';
            document.getElementById('summary-button-container').style.display = 'none';
            document.getElementById('chart').innerHTML =`<canvas id="timeChart"></canvas>`;
            document.getElementById('time-summary').style.display = 'none';
        
        }

        window.onload = function() {
            // const savedNumQuestions = localStorage.getItem('numQuestions');
            // const savedNumColumns = localStorage.getItem('numColumns');
            // const savedStartIndex = localStorage.getItem('startIndex');
            // const savedHistory = JSON.parse(localStorage.getItem('history'));
            // // let timeSpent = JSON.parse(localStorage.getItem('timeSpent')) || {}; 
            // if (savedNumQuestions) {
            //     document.getElementById('numQuestions').value = savedNumQuestions;
            // }
            // if (savedNumColumns) {
            //     document.getElementById('numColumns').value = savedNumColumns;
            // }
            // if (savedStartIndex) {
            //     document.getElementById('startIndex').value = savedStartIndex;
            // }
            generateForm();

        };
        // Handle form submission
        function submitForm() {
            // Trigger the stop button click event
            document.getElementById('stopButton').click();
            const questions = document.querySelectorAll('.question');
            
            // Set display style for all elements with the class 'result-container'
            const resultContainers = document.getElementsByClassName('result-container');
            for (let i = 0; i < resultContainers.length; i++) {
                resultContainers[i].style.display = 'flex';
            }

            const startIndex = parseInt(document.getElementById('startIndex').value) || 1;
            const numQuestions = parseInt(document.getElementById('numQuestions').value) || 20;
            let resultHTML = '<center><h2>Your Responses</h2></center><table class="response-table left-align" border="1" style="border-collapse: collapse;"><tr>';


            questions.forEach((question, index) => {
                const questionNumber = index + startIndex;
                const questionText = "0".repeat((numQuestions + startIndex - 1).toString().length - (questionNumber).toString().length);
                const selectedOption = question.querySelector('input[type="radio"]:checked');
                const response = selectedOption ? selectedOption.value : '*';
                resultHTML += `<td>${questionText}${questionNumber}. (${response})</td>`;

                // Create a new row after every 4 columns
                if ((index + 1) % 4 === 0) {
                    resultHTML += '</tr><tr>';
                }
            });

            resultHTML += '</tr></table>';
            document.getElementById('your-response').innerHTML = resultHTML;

            // Hide the questions and options after submitting
            document.getElementById('formContainer-wrapper').style.display = 'none';

            // Display the result with tick and cross options
            const resultContainer = document.getElementById('assessment');
            const resultHeader = '<h2> Assessment</h2>'+'<p>'.repeat(4);
            resultContainer.innerHTML = resultHeader;
            
            for (let i = 1; i <= numQuestions; i++) {
                const resultItem = document.createElement('div');
                resultItem.className = 'result-item';
                const questionText = "0".repeat((numQuestions + startIndex - 1).toString().length - (i+startIndex-1).toString().length);
                const label = document.createElement('label');
                label.textContent = `${questionText}${i+startIndex-1}.`;
                resultItem.appendChild(label);
                const correctRadio = document.createElement('input');
                correctRadio.type = 'radio';
                correctRadio.name = `question-${i + startIndex-1}`;
                correctRadio.className = 'correct';
                correctRadio.title = 'Correct';
                resultItem.appendChild(correctRadio);

                const incorrectRadio = document.createElement('input');
                incorrectRadio.type = 'radio';
                incorrectRadio.name = `question-${i + startIndex-1}`;
                incorrectRadio.className = 'incorrect';
                incorrectRadio.title = 'Incorrect';
                resultItem.appendChild(incorrectRadio);

                resultContainer.appendChild(resultItem);
            }
            // Show the summary button after submission
            document.getElementById('summary').style.display = 'none';
            document.getElementById('summaryButton').style.display='block';
            document.getElementById('summary-button-container').style.display = 'block';
            
        }
        function showSummary() {
            const correctRadios = document.querySelectorAll('.correct:checked');
            const incorrectRadios = document.querySelectorAll('.incorrect:checked');
            const totalQuestions = document.querySelectorAll('.result-item').length;
            const correct_answers = correctRadios.length;
            const wrong_answers = incorrectRadios.length;
            const notAttempted = totalQuestions - (correct_answers+wrong_answers);
            const marks = 2*correct_answers-wrong_answers;
            const total_marks = 2*totalQuestions;
            const marks_percent = ((marks/total_marks*100)).toFixed(2);
            const summaryHTML = `<h2>Summary</h2><table class="summary-table">
            <tr>
                <th>Category</th>
                <th>Count</th>
            </tr>
            <tr>
                <td>Correct</td>
                <td>${correct_answers}</td>
            </tr>
            <tr>
                <td>Incorrect</td>
                <td>${wrong_answers}</td>
            </tr>
            <tr>
                <td>Not Attempted</td>
                <td>${notAttempted}</td>
            </tr>
            <tr>
                <td>Marks</td>
                <td>${marks} (${marks_percent}%)</td>
            </tr>
        </table>
            `;

            const summaryContainer = document.getElementById('summary');
            summaryContainer.innerHTML = summaryHTML;
            summaryContainer.style.display = 'block';
            document.getElementById('summaryButton').style.display='none';
            const timeSummaryContainer = document.getElementById('time-summary');
            timeSummaryContainer.style.display = 'block';
            document.getElementById('chart').style.display = 'block';
            createGraph();
        }
        function calculateStatistics(times) {
            if(times.length===0){
                const mean = 0;
                const median = 0;
                const stdDev = 0;
                return { mean, median, stdDev };
            }
            const mean = times.reduce((a, b) => a + b, 0) / times.length;
            // const median = times.sort((a, b) => a - b)[Math.floor(times.length / 2)];
            const median = times.sort()[Math.floor(times.length / 2)];
            const stdDev = Math.sqrt(times.map(x => Math.pow(x - mean, 2)).reduce((a, b) => a + b, 0) / times.length);
            console.log(mean,median,stdDev);
            return { mean, median, stdDev };
        }
        function displayStatisticsTable(allStats, correctStats, incorrectStats, notAttemptedStats) {
            const table = `<h2>Statistics of Result</h2>
                <table border="1">
                    <tr>
                        <th>Category</th>
                        <th>Mean (s)</th>
                        <th>Median (s)</th>
                        <th>Standard Deviation (s)</th>
                    </tr>
                    <tr>
                        <td>All</td>
                        <td>${allStats.mean.toFixed(2)}</td>
                        <td>${allStats.median.toFixed(2)}</td>
                        <td>${allStats.stdDev.toFixed(2)}</td>
                    </tr>
                    <tr>
                        <td>Correct</td>
                        <td>${correctStats.mean.toFixed(2)}</td>
                        <td>${correctStats.median.toFixed(2)}</td>
                        <td>${correctStats.stdDev.toFixed(2)}</td>
                    </tr>
                    <tr>
                        <td>Incorrect</td>
                        <td>${incorrectStats.mean.toFixed(2)}</td>
                        <td>${incorrectStats.median.toFixed(2)}</td>
                        <td>${incorrectStats.stdDev.toFixed(2)}</td>
                    </tr>
                    <tr>
                        <td>Not Attempted</td>
                        <td>${notAttemptedStats.mean.toFixed(2)}</td>
                        <td>${notAttemptedStats.median.toFixed(2)}</td>
                        <td>${notAttemptedStats.stdDev.toFixed(2)}</td>
                    </tr>
                </table>
            `;
            document.getElementById('time-summary').innerHTML = table;
        }
        function createGraph(){
            let timeSpent = JSON.parse(localStorage.getItem('timeSpent')) || {};
            const startIndex = parseInt(document.getElementById('startIndex').value) || 1;
            const numQuestions = parseInt(document.getElementById('numQuestions').value) || 20;
            // Chart.register(Chart.Annotation);
            const timeSpents = {};
            for(let i = 1; i <= numQuestions; i++){
                const questionNumber = i + startIndex - 1;
                timeSpents [questionNumber] = timeSpent[questionNumber]/1000;
            }

           
            const responses = {};
            for (let i = 1; i <= numQuestions; i++) {
                const questionNumber = i + startIndex - 1;
                const correctRadio = document.querySelector(`input[name="question-${questionNumber}"].correct`);
                const incorrectRadio = document.querySelector(`input[name="question-${questionNumber}"].incorrect`);

                if (correctRadio.checked) {
                    responses[questionNumber] = 'correct';
                } else if (incorrectRadio.checked) {
                    responses[questionNumber] = 'incorrect';
                } else {
                    responses[questionNumber] = 'not_attempted';
                }
            }

            const allTimes = Object.values(timeSpents);
            const correctTimes = Object.keys(timeSpents).filter(key => responses[key] === 'correct').map(key => timeSpents[key]);
            const incorrectTimes = Object.keys(timeSpents).filter(key => responses[key] === 'incorrect').map(key => timeSpents[key]);
            const notAttemptedTimes = Object.keys(timeSpents).filter(key => responses[key] === 'not_attempted').map(key => timeSpents[key]);

            const allStats = calculateStatistics(allTimes);
            const correctStats = calculateStatistics(correctTimes);
            const incorrectStats = calculateStatistics(incorrectTimes);
            const notAttemptedStats = calculateStatistics(notAttemptedTimes);

            // Display the statistics in a table
            displayStatisticsTable(allStats, correctStats, incorrectStats, notAttemptedStats);
            // Calculate mean and standard deviation
            const times = Object.values(timeSpents);
            const mean = times.reduce((a, b) => a + b, 0) / times.length;
            const stdDev = Math.sqrt(times.map(x => Math.pow(x - mean, 2)).reduce((a, b) => a + b) / times.length);

            // Prepare data for the chart
            const labels = Object.keys(timeSpents);
            const data = Object.values(timeSpents);
            const backgroundColors = labels.map(label => {
                if (responses[label] === 'correct') return 'green';
                if (responses[label] === 'incorrect') return 'red';
                return 'grey';
            });

            // Create the chart
            const ctx = document.getElementById('timeChart').getContext('2d');
            timeChart = new Chart(ctx, {
                type: 'scatter',
                data: {
                    labels: labels,
                    datasets: [{
                        label: 'Time Spent (seconds)',
                        data: labels.map((label, index) => ({ x: label, y: data[index] })),
                        backgroundColor: backgroundColors,
                        pointRadius: 5
                    }]
                },
                options: {
                    scales: {
                        x: {
                            type: 'linear',
                            position: 'bottom',
                            title: {
                                display: true,
                                text: 'Question Number'
                            }
                        },
                        y: {
                            title: {
                                display: true,
                                text: 'Time Spent (seconds)'
                            }
                        }
                    },
                    plugins: {
                        annotation: {
                            annotations: {
                                meanLine: {
                                    type: 'line',
                                    yMin: mean,
                                    yMax: mean,
                                    borderColor: 'blue',
                                    borderWidth: 2,
                                    label: {
                                        content: 'Mean',
                                        enabled: true,
                                        position: 'start'
                                    }
                                },
                                upperStdDevLine: {
                                    type: 'line',
                                    yMin: mean + 3 * stdDev,
                                    yMax: mean + 3 * stdDev,
                                    borderColor: 'orange',
                                    borderWidth: 2,
                                    label: {
                                        content: 'Mean + 3*SD',
                                        enabled: true,
                                        position: 'start'
                                    }
                                },
                                lowerStdDevLine: {
                                    type: 'line',
                                    yMin: mean - 3 * stdDev,
                                    yMax: mean - 3 * stdDev,
                                    borderColor: 'orange',
                                    borderWidth: 2,
                                    label: {
                                        content: 'Mean - 3*SD',
                                        enabled: true,
                                        position: 'start'
                                    }
                                }
                            }
                        }
                    }
                }
            });
            // timeChart.register(ChartAnnotation.Annotation);
        }
    </script>
</body>
</html>